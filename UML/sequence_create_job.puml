@startuml EasySave_Sequence_Create_Job_v2.0
!theme plain
autonumber

actor User
participant "MainViewModel" as VM
participant "JobEditorViewModel" as JVM
participant "JobManager" as JM
participant "BackupJob" as Job

User -> VM : Click "Create Job"
activate VM

VM -> JVM : new JobEditorViewModel()
activate JVM
VM -> JVM : Show Dialog
deactivate VM

User -> JVM : Enter Name, Source, Target, Type
User -> JVM : Click "Save"

JVM -> JVM : CreateJob()
activate JVM
JVM -> Job : new BackupJob(name, source, target, type)
activate Job
Job --> JVM : jobInstance
deactivate Job
JVM --> VM : jobInstance
deactivate JVM

VM -> JM : AddJob(name, source, target, type)
activate JM
JM -> JM : Jobs.Add(job)
JM -> JM : SaveJobs()
activate JM
note right
    Saves to %AppData%\ProSoft\EasySave\jobs.json
    Serialized as JSON
end note
deactivate JM
deactivate JM

VM -> VM : Configure UI (Add to ObservableCollection)
VM --> User : Show "Job Created" message

deactivate VM

@enduml
