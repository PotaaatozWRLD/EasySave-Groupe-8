@startuml EasySave_Activity_Backup_Process
!theme plain

start

:User initiates Backup;

if (Configuration loaded?) then (yes)
    :Get Backup Jobs;
else (no)
    :Load Configuration;
endif

:Select Job(s);

if (Business Software Check configured?) then (yes)
    :Check if processes are running;
    if (Processes running?) then (yes)
        :Display Error;
        :Abort Backup;
        stop
    endif
endif

:Create BackupService;

partition "Execute Backup" {
    :Calculate Total Files & Size;
    :Initialize Logger (State: ACTIVE);
    
    while (More files?) is (yes)
        :Get Next File;
        
        if (Backup Type is Full OR (Differential AND File Changed)) then (yes)
            if (File Extension in Encryption List?) then (yes)
                :Encrypt File (CryptoSoft);
                note right
                   Uses external process
                   Measure encryption time
                end note
            else (no)
                :Copy File System;
            endif
            
            :Log Operation (JSON/XML);
            :Update State (Progress);
        else (no)
            :Skip File;
        endif
    endwhile (no)
    
    :Update State (END);
}

:Display Completion Message;

stop

@enduml
