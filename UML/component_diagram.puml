@startuml EasySave_Component_Diagram_v3.0
!theme plain

' =============== EXTERNAL SYSTEMS ===============
cloud "User Environment" {
    actor User
    file "Console\nTerminal" as Terminal
    file "GUI\nApplication" as GUIApp
}

node "Docker Host" {
    component "Log Server\n(Alpine/Netcat)" as DockerLog
    port "9000" as Port9000
    DockerLog - Port9000
}

cloud "File System" {
    folder "%AppData%\\ProSoft\\EasySave" as AppData {
        file "config.json" as ConfigFile
        file "jobs.json" as JobsFile
        folder "Logs" as LogsFolder
    }
}

' =============== APPLICATION COMPONENTS ===============
package "EasySave Application" {
    
    component "EasySave.GUI" as GUI {
        [MainViewModel]
        [LocalizationManager]
    }
    
    component "EasySave.Console" {
        [Program]
        [AppConfig]
    }
    
    component "EasySave.Core" {
        component "Services" {
            [ParallelBackupCoordinator] as Coord
            [BackupService] as BackupSvc
            [BusinessSoftwareMonitor] as Monitor
            [EncryptionService] as EncSvc
            [LargeFileThrottle] as Throttle
        }
        
        component "Models" {
            [JobExecutionContext] as Context
            [BackupJob] as Job
        }
    }
    
    component "EasyLog.dll" as LogDLL {
        interface "ILogger" as ILog
        [CompositeLogger] as CompLog
        [NetworkLogger] as NetLog
        [JsonLogger] as JsonLog
        [XmlLogger] as XmlLog
    }
}

' =============== RELATIONSHIPS ===============

' Entry Points
User --> GUIApp
GUIApp --> GUI
Terminal --> Program

' GUI Wiring
GUI --> Coord : manages
GUI --> AppConfig : reads/writes

' Coordinator Logic
Coord --> BackupSvc : delegates (Parallel)
Coord --> Monitor : subscribes
Coord --> Context : tracks state
Coord --> ILog : logs events

' Backup Logic
BackupSvc --> Job : reads
BackupSvc --> EncSvc : uses
BackupSvc --> Throttle : uses (for large files)
BackupSvc --> ILog : logs transfers

' Logging
ILog <|.. CompLog
CompLog --> NetLog : contains
CompLog --> JsonLog : contains
CompLog --> XmlLog : contains

NetLog ..> Port9000 : TCP (Write)
JsonLog ..> LogsFolder : File IO (Write)

' Configuration
AppConfig --> ConfigFile : Read/Write
Program --> AppConfig : Uses

' Monitoring
Monitor --> User : Inspects Processes

@enduml
